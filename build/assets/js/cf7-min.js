jQuery(e=>{function s(e,s){s.forEach(function(s){var i=s.name,a=s.value,t="[name="+i+"]",n=e.find(t);n.is(".wpcf7-validates-as-required")&&""==a?(n.addClass("validation-failed"),n.removeClass("validation-successed")):(n.removeClass("validation-failed"),n.addClass("validation-successed"))})}e("body").on("wpcf7submit",function(i){let a=e(i.target),t=a.find(".js-form-loader");var n=a.find(".js-on-complete"),o=a.find(".js-on-error");if(t.length>0&&t.removeClass("is-active"),"mail_sent"==i.detail.apiResponse.status){var l=i.detail.apiResponse.message,r=i.detail.inputs;n.find("span").text(l),s(a,r),n.length>0&&(n.addClass("is-active"),setTimeout(function(){n.removeClass("is-active")},3e3))}else{s(a,r=i.detail.inputs);l=i.detail.apiResponse.message;o.find("span").text(l),o.length>0&&(o.addClass("is-active"),setTimeout(function(){o.removeClass("is-active")},2500))}}),e(".wpcf7-form").on("submit",function(s){let i=e(s.target).find(".js-form-loader");i.length>0&&i.addClass("is-active")})});const messages={empty:"Поле обязательно для заполнения",email:"Некорректно введен e-mail",phone:"Некорректно введен номер телефона",formInvalid:"При отправке заявки произошла ошибка. Пожалуйста проверьте введеные данные."},cf7RequiredFields=document.querySelectorAll(".wpcf7-validates-as-required"),cf7SubmitButtons=document.querySelectorAll(".wpcf7-submit"),submitButtonClickCallback=function(e){var s=this.closest("form");s.querySelectorAll("input, textarea").forEach(function(e,s){checkField(e)});isFormValid(s);if(!isFormValid(s))return e.stopPropagation(),e.preventDefault(),showFormError(s,messages.formInvalid),!1};function checkField(e){var s,i=_.trim(e.value),a=e.classList.contains("wpcf7-validates-as-required"),t=!0;if(s=e.classList.contains("mask-email")?"email":e.classList.contains("mask-phone")?"phone":"common",""!=i&&(t=!1),removeErrorMessage(e),"email"==s){var n=validateEmail(i);a&&t?(e.classList.add("ui__invalid_email"),addErrorMessage(e,messages.empty)):t||n?e.classList.remove("ui__invalid_email"):(e.classList.add("ui__invalid_email"),addErrorMessage(e,messages.email))}else if("phone"==s){var o=validatePhone(i);a&&t?(e.classList.add("ui__invalid_phone"),addErrorMessage(e,messages.empty)):t||o?e.classList.remove("ui__invalid_phone"):(e.classList.add("ui__invalid_phone"),addErrorMessage(e,messages.phone))}else"phone"!=s&&"email"!=s&&(t&&a?(e.classList.add("ui__invalid_is-empty"),addErrorMessage(e,messages.empty)):(e.classList.remove("ui__invalid_is-empty"),removeErrorMessage(e)))}function addErrorMessage(e,s){var i=e.nextSibling;isExist(i)&&void 0!==i.classList&&i.classList.contains("ui__invalid_message")&&i.remove();var a=document.createElement("span");a.classList.add("ui__invalid_message"),a.textContent=s,e.after(a)}function removeErrorMessage(e){var s=e.nextSibling;null!=s&&"object"==typeof s&&void 0!==s.classList&&s.classList.contains("ui__invalid_message")&&s.remove()}function showFormError(e,s){var i=e.querySelector(".js-on-error"),a=e.querySelector(".js-on-error .message");try{isExist(i)&&isExist(a)&&(a.textContent=s,i.classList.add("is-active"),setTimeout(function(){i.classList.remove("is-active")},1500))}catch(e){console.log(e.name),console.error(e.message)}}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function validatePhone(e){return/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/gm.test(e)}function isFormValid(e){return!(e.querySelectorAll(".ui__invalid_is-empty, .ui__invalid_email, .ui__invalid_phone").length>0)}function isExist(e){return void 0!==e&&null!=e}cf7RequiredFields.forEach(function(e){e.closest("div").classList.add("ui__has-required-input")}),cf7SubmitButtons.forEach(function(e,s){e.addEventListener("click",submitButtonClickCallback)}),jQuery(function(e){e(".mask-phone").mask("+7 (999) 999-99-99")});